(this.webpackJsonpinmobiliaria=this.webpackJsonpinmobiliaria||[]).push([[0],{132:function(e,t,a){e.exports=a(161)},137:function(e,t,a){},138:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),o=a.n(i),l=(a(137),a(15)),c=a(216),s=(a(138),a(19)),u=a(20),m=a(25),d=a(24),p=a(22),f=a(214),h=a(230),b=a(211),g=a(212),E=a(58),v=a(213),y=a(229),x=a(5),j=r.a.createContext(),I=j,w=function(e){return function(t){return r.a.createElement(j.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))}))}},O=a(66),C=a.n(O),S=(a(139),a(143),a(162),{apiKey:"AIzaSyB9BHEnW5w1DbBr5_bEqzefwA76sw3DYY8",authDomain:"home-48c6b.firebaseapp.com",databaseURL:"https://home-48c6b.firebaseio.com",projectId:"home-48c6b",storageBucket:"home-48c6b.appspot.com",messagingSenderId:"1015388865182",appId:"1:1015388865182:web:6f9934b627b42bdc3a318f",measurementId:"G-M5042SGZSX"}),k=function(){function e(){var t=this;Object(s.a)(this,e),this.guardarDocumento=function(e,a){return t.storage.ref().child(e).put(a)},this.devolverDocumento=function(e){return t.storage.ref().child(e).getDownloadURL()},this.guardarFotosInmueble=function(e){return t.storage.ref().guardarFotosInmueble(e)},C.a.initializeApp(S),this.db=C.a.firestore(),this.auth=C.a.auth(),this.storage=C.a.storage(),this.storage.ref().constructor.prototype.guardarFotosInmueble=function(e){var t=this;return Promise.all(e.map((function(e){return t.child(e.alias).put(e).then((function(a){return t.child(e.alias).getDownloadURL()}))})))}}return Object(u.a)(e,[{key:"estaIniciado",value:function(){var e=this;return new Promise((function(t){e.auth.onAuthStateChanged(t)}))}}]),e}(),D=a(42),T=Object(n.createContext)(),A=function(e){var t=e.reducer,a=e.initialState,i=e.children;return r.a.createElement(T.Provider,{value:Object(n.useReducer)(t,a)},i)},N=function(){return Object(n.useContext)(T)},W=function(e,t,a,n){return new Promise((function(r,i){t.auth.signInWithEmailAndPassword(a,n).then((function(a){t.db.collection("Users").doc(a.user.uid).get().then((function(t){var a=t.data();e({type:"INICIAR_SESION",sesion:a,autenticado:!0}),r({status:!0})}))})).catch((function(e){console.log("error",e),r({status:!1,mensaje:e})}))}))},R=function(e,t,a){return new Promise((function(n,r){t.auth.createUserWithEmailAndPassword(a.email,a.password).then((function(r){t.db.collection("Users").doc(r.user.uid).set({id:r.user.uid,email:a.email,nombre:a.nombre,apellido:a.apellido},{merge:!0}).then((function(t){a.id=r.user.uid,e({type:"INICIAR_SESION",sesion:a,autenticado:!0}),n({status:!0})}))})).catch((function(e){console.log("error",e),n({status:!1,mensaje:e})}))}))},P=function(e,t){return new Promise((function(a,n){t.auth.signOut().then((function(t){e({type:"SALIR_SESION",nuevoUsuario:{nombre:"",apellido:"",email:"",foto:"",id:"",telefono:""},autenticado:!1}),a()}))}))},U=a(202),B=a(206),L=a(207),F=a(208),z=function(e){var t=e.classes,a=(e.usuario,e.textoUsuario),n=e.fotoUsuario,i=e.salirSesion;return r.a.createElement("div",{className:t.list},r.a.createElement(U.a,null,r.a.createElement(B.a,{button:!0,component:L.a,to:"/auth/registrarUsuario"},r.a.createElement(y.a,{src:n}),r.a.createElement(F.a,{classes:{primary:t.listItemText},primary:a})),r.a.createElement(B.a,{button:!0,onClick:i},r.a.createElement(F.a,{classes:{primary:t.listItemText},primary:"Salir"}))))},_=a(35),M=a(13),G=a(209),q=function(e){var t=e.classes,a=(e.usuario,e.textoUsuario),n=e.fotoUsuario;e.salirSesion;return r.a.createElement("div",{className:t.list},r.a.createElement(U.a,null,r.a.createElement(B.a,{component:_.b,button:!0,to:"/auth/uprofile"},r.a.createElement(y.a,{src:n}),r.a.createElement(F.a,{classes:{primary:t.ListItemText},primary:"\xa1Hola "+a+"!"}))),r.a.createElement(G.a,null),r.a.createElement(U.a,null,r.a.createElement(B.a,{component:_.b,button:!0,to:"/auth/nuevoinmueble"},r.a.createElement("i",{className:"material-icons"},"add_box"),r.a.createElement(F.a,{classes:{primary:t.ListItemText},primary:"Nueva siembra"})),r.a.createElement(B.a,{component:_.b,button:!0,to:""},r.a.createElement("i",{className:"material-icons"},"business"),r.a.createElement(F.a,{classes:{primary:t.ListItemText},primary:"Siembras"})),r.a.createElement(B.a,{component:_.b,button:!0,to:""},r.a.createElement("i",{className:"material-icons"},"mail_outline"),r.a.createElement(F.a,{classes:{primary:t.ListItemText},primary:"Mensajes"}))))},K=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={firebase:null,right:!1,left:!1},e.salirSesionApp=function(){var t=e.state.firebase,a=Object(l.a)(e.context,2),n=(a[0].sesion,a[1]);console.log(t),P(n,t).then((function(t){e.props.history.push("/auth/login")}))},e.toggleDrawer=function(t,a){return function(){e.setState(Object(p.a)({},t,a))}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=Object(l.a)(this.context,2),a=t[0].sesion,n=(t[1],a.usuario),i=n.nombre+" "+n.apellido;return r.a.createElement("div",null,r.a.createElement(h.a,{open:this.state.right,onClose:this.toggleDrawer("right",!1),anchor:"right"},r.a.createElement("div",{role:"button",onClick:this.toggleDrawer("right",!1),onKeyDown:this.toggleDrawer("right",!1)},r.a.createElement(z,{classes:e,usuario:n,textoUsuario:i,fotoUsuario:n.foto,salirSesion:this.salirSesionApp}))),r.a.createElement(h.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1),anchor:"left"},r.a.createElement("div",{role:"button",onClick:this.toggleDrawer("left",!1),onKeyDown:this.toggleDrawer("left",!1)},r.a.createElement(q,{classes:e,textoUsuario:i,fotoUsuario:n.foto}))),r.a.createElement(b.a,null,r.a.createElement(g.a,{color:"inherit",onClick:this.toggleDrawer("left",!0)},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement(E.a,{variant:"h6",component:_.b,to:"/",style:{textDecoration:"none"}},"Agrindali"),r.a.createElement("div",{className:e.grow}),r.a.createElement("div",{className:e.sectionDesktop},r.a.createElement(g.a,{color:"inherit",component:_.b,to:""},r.a.createElement("i",{className:"material-icons"},"mail_outline")),r.a.createElement(v.a,{color:"inherit",onClick:this.salirSesionApp},"Salir"),r.a.createElement(v.a,{color:"inherit"},i),r.a.createElement(y.a,{src:n.foto})),r.a.createElement("div",{className:e.sectionMobile},r.a.createElement(g.a,{color:"inherit",onClick:this.toggleDrawer("right",!0)},r.a.createElement("i",{className:"material-icons"},"more_vert")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a={};return e.firebase!==t.firebase&&(a.firebase=e.firebase),a}}]),a}(n.Component);K.contextType=T;var H=Object(D.a)(M.g,w,Object(x.a)((function(e){return{sectionDesktop:Object(p.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(p.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),grow:{flexGrow:1},avatarSize:{width:40,height:40},listItemText:{fontSize:"14px",fontWeight:600,paddingLeft:"15px",color:"#212121"},list:{width:250},search:Object(p.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:"#61afef","&:hover":{backgroundColor:"#61afef"},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),inputRoot:{color:"inherit"},inputInput:Object(p.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}})))(K),J=a(164),Y=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={firebase:null},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.firebase,t=Object(l.a)(this.context,2),a=t[0].sesion,n=t[1];null===e.auth.currentUser||a||e.db.collection("Users").doc(e.auth.currentUser.uid).get().then((function(e){var t=e.data();n({type:"INICIAR_SESION",sesion:t,autenticado:!0})}))}},{key:"render",value:function(){var e=Object(l.a)(this.context,2),t=e[0].sesion;e[1];return t&&t.autenticado?r.a.createElement("div",null,r.a.createElement(f.a,{position:"static"},r.a.createElement(H,null))):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a={};return e.firebase!==t.firebase&&(a.firebase=e.firebase),a}}]),a}(n.Component);Y.contextType=T;var Z=Object(D.a)(Object(J.a)((function(e){return{sectionDesktop:Object(p.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(p.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})),w)(Y),V=a(231),X=a(224),$=a(120),Q=Object($.a)({typography:{useNextVariants:!0},palette:{primary:{main:"#157FD4"},secondary:{main:"#7fd515"},common:{white:"#ffffff"},background:{default:"#f5f5f5"}},spacing:10}),ee=a(40),te=a.n(ee),ae=a(51),ne=a(215),re=a(225),ie=a(85),oe=a.n(ie),le=function(e,t){e({type:"OPEN_SNACKBAR",openMensaje:t})},ce={paper:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:8,backgroundColor:"#e53935"},form:{width:"100%",marginTop:20},submit:{marginTop:15,marginBottom:20}},se=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={usuario:{nombre:"",apellido:"",email:"",password:""}},e.onChange=function(t){var a=Object.assign({},e.state.usuario);a[t.target.name]=t.target.value,e.setState({usuario:a})},e.RegistrarUsuario=function(){var t=Object(ae.a)(te.a.mark((function t(a){var n,r,i,o,c,s;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=Object(l.a)(e.context,2),n[0].sesion,r=n[1],i=e.state,o=i.firebase,c=i.usuario,t.next=5,R(r,o,c);case 5:(s=t.sent).status?e.props.history.push("/"):le(r,{open:!0,mensaje:s.mensaje.message});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(ne.a,{maxWidth:"xs"},r.a.createElement("div",{style:ce.paper},r.a.createElement(y.a,{style:ce.avatar},r.a.createElement(oe.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Registre su cuenta"),r.a.createElement("form",{style:ce.form},r.a.createElement(c.a,{container:!0,spacing:1},r.a.createElement(c.a,{item:!0,md:12,xs:12},r.a.createElement(re.a,{variant:"outlined",name:"nombre",onChange:this.onChange,value:this.state.usuario.nombre,fullWidth:!0,label:"Ingrese su nombre"})),r.a.createElement(c.a,{item:!0,md:12,xs:12},r.a.createElement(re.a,{variant:"outlined",name:"apellido",onChange:this.onChange,value:this.state.usuario.apellido,fullWidth:!0,label:"Ingrese sus apellidos"})),r.a.createElement(c.a,{item:!0,md:12,xs:12},r.a.createElement(re.a,{variant:"outlined",name:"email",onChange:this.onChange,value:this.state.usuario.email,fullWidth:!0,label:"Ingrese su e-mail"})),r.a.createElement(c.a,{item:!0,md:12,xs:12},r.a.createElement(re.a,{variant:"outlined",type:"password",name:"password",onChange:this.onChange,value:this.state.usuario.password,fullWidth:!0,label:"Ingrese su contrase\xf1a"}))),r.a.createElement(c.a,{container:!0,justify:"center"},r.a.createElement(c.a,{item:!0,xs:12,md:6},r.a.createElement(v.a,{type:"submit",onClick:this.RegistrarUsuario,variant:"outlined",fullWidth:!0,size:"large",color:"primary",style:ce.submit},"Registrar"))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.firebase===t.firebase?null:{firebase:e.firebase}}}]),a}(n.Component);se.contextType=T;var ue=Object(D.a)(w)(se),me={paper:{marginTop:9,display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:8,backgroundColor:"#e53935"},form:{width:"100%",marginTop:8}},de=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={firebase:null,usuario:{email:"",password:""}},e.onChange=function(t){var a=Object.assign({},e.state.usuario);a[t.target.name]=t.target.value,e.setState({usuario:a})},e.login=function(){var t=Object(ae.a)(te.a.mark((function t(a){var n,r,i,o,c,s,u,m;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=Object(l.a)(e.context,2),n[0].sesion,r=n[1],i=e.state,o=i.firebase,c=i.usuario,s=c.email,u=c.password,t.next=6,W(r,o,s,u);case 6:(m=t.sent).status?e.props.history.push("/"):le(r,{open:!0,mensaje:m.mensaje.message});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(ne.a,{maxWidth:"xs"},r.a.createElement("div",{style:me.paper},r.a.createElement(y.a,{style:me.avatar},r.a.createElement(oe.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Inicia sesi\xf3n"),r.a.createElement("form",{style:me.form},r.a.createElement(re.a,{variant:"outlined",fullWidth:!0,margin:"dense",label:"Correo electr\xf3nico",name:"email",onChange:this.onChange,value:this.state.usuario.email}),r.a.createElement(re.a,{variant:"outlined",fullWidth:!0,margin:"dense",type:"password",label:"Contrase\xf1a",name:"password",onChange:this.onChange,value:this.state.usuario.password}),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:this.login},"EMPEZAR"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.firebase===t.firebase?null:{firebase:e.firebase}}}]),a}(n.Component);de.contextType=T;var pe=Object(D.a)(w)(de),fe=a(121);var he=function(e){var t=e.component,a=e.autenticadoFirebase,n=Object(fe.a)(e,["component","autenticadoFirebase"]),i=N(),o=Object(l.a)(i,2),c=o[0].autenticado;return o[1],r.a.createElement(M.b,Object.assign({},n,{render:function(e){return!0===c||null!==a?r.a.createElement(t,Object.assign({},e,n)):r.a.createElement(M.a,{to:"/auth/login"})}}))},be=a(21),ge=a(95),Ee=a(228),ve=a(227),ye=a(54),xe=a(52),je=a.n(xe),Ie={paper:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",padding:"5px",borderRadius:"10px"},breadcrumbs:{backgroundColor:"#ffffff",display:"flex",padding:"20px",borderRadius:"12px"},form:{width:"100%",marginTop:20},avatar:{margin:10,width:100,height:100},submit:{marginTop:15,marginBottom:20}},we=w((function(e){var t=N(),a=Object(l.a)(t,2),i=a[0].sesion,o=a[1],s=e.firebase,u=Object(n.useState)({nombre:"",apellido:"",email:"",telefono:"",id:""}),m=Object(l.a)(u,2),d=m[0],f=m[1],h=function(e){var t=e.target,a=t.name,n=t.value;f((function(e){return Object(be.a)(Object(be.a)({},e),{},Object(p.a)({},a,n))}))};Object(n.useEffect)((function(){""===d.id&&function(e){e&&f(e.usuario)}(i)}));var b=Object(n.useState)(!1),g=Object(l.a)(b,2),x=g[0],j=g[1];return i?r.a.createElement(ne.a,{component:"main",maxWidth:"xs",justify:"center"},r.a.createElement("div",{style:Ie.paper},r.a.createElement(y.a,{style:Ie.avatar,src:d.foto,onClick:function(){return j(!0)}}),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Perfil de la cuenta"),r.a.createElement(ge.a,{style:Ie.paper},r.a.createElement(Ee.a,{"aria-label":"breadcrumb",style:Ie.breadcrumbs},r.a.createElement("form",{style:Ie.form},r.a.createElement(c.a,{container:!0,width:"xs",spacing:1},r.a.createElement(c.a,{item:!0,xs:12,md:6},r.a.createElement(re.a,{name:"nombre",variant:"outlined",fullWidth:!0,label:"Nombre",value:d.nombre,onChange:h})),r.a.createElement(c.a,{item:!0,xs:12,md:6},r.a.createElement(re.a,{name:"apellido",variant:"outlined",fullWidth:!0,label:"Apellido",value:d.apellido,onChange:h})),r.a.createElement(c.a,{item:!0,xs:12,md:12},r.a.createElement(re.a,{name:"email",variant:"outlined",fullWidth:!0,label:"Correo Electr\xf3nico",value:d.email,onChange:h})),r.a.createElement(c.a,{item:!0,xs:12,md:12},r.a.createElement(re.a,{name:"telefono",variant:"outlined",fullWidth:!0,label:"Tel\xe9fono",value:d.telefono,onChange:h}))),r.a.createElement(c.a,{container:!0,justify:"center"},r.a.createElement(c.a,{item:!0,xs:12,md:12},r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",size:"large",color:"primary",style:Ie.submit,onClick:function(e){e.preventDefault(),s.db.collection("Users").doc(s.auth.currentUser.uid).set(d,{merge:!0}).then((function(e){o({type:"INICIAR_SESION",sesion:d,autenticado:!0}),le(o,{open:!0,mensaje:"Se guardaron los cambios"})})).catch((function(e){le(o,{open:!0,mensaje:"Se ha producido un error"+e})}))}},"Guardar"))))))),r.a.createElement(ye.b,{dialogTitle:"",filesLimit:1,dropzoneText:"Selecciona o arrastra tu foto de perfil",previewText:" ",Icon:je.a,acceptedFiles:["image/*"],cancelButtonText:"Cancelar",submitButtonText:"Guardar",maxFileSize:5e6,open:x,onClose:function(){return j(!1)},onSave:function(e){var t=e[0],a=Object(ve.a)(),n=t.name,r=n.split(".").pop(),i=(n.split(".")[0]+"_"+a+"."+r).replace(/\s/g,"_").toLocaleLowerCase();s.guardarDocumento(i,t).then((function(e){s.devolverDocumento(i).then((function(e){d.foto=e,s.db.collection("Users").doc(s.auth.currentUser.uid).set({foto:e},{merge:!0}).then((function(e){o({type:"INICIAR_SESION",sesion:d,autenticado:!0})}))}))}))},showPreviews:!1,showPreviewsInDropzone:!0,showFileNamesInPreview:!1})):null})),Oe=a(53),Ce=a.n(Oe),Se=function(e){var t=[];e.match(/("[^"]+"|[^"\s]+)/g).forEach((function(e){var a="";e.split("").forEach((function(e){a+=e,t.push(a.toLowerCase())}))}));var a="";return e.split("").forEach((function(e){a+=e,t.push(a)})),t},ke={container:{paddingTop:"8px"},paper:{marginTop:8,display:"flex",flexDirection:"column",padding:"20px",alignItems:"center",backgroundColor:"ffffff"},homeIcon:{width:20,height:20,marginRight:"4px"},link:{display:"flex"},submit:{marginTop:15,marginBottom:10},dropzoneStyle:{marginTop:20,marginBottom:10}},De=w(function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={inmueble:{pais:"",ciudad:"",direccion:"",tipoInmueble:"",descripcionInmueble:"",fotos:[]},archivos:[]},e.entraDatoEnEstado=function(t){var a=Object.assign({},e.state.inmueble);a[t.target.name]=t.target.value,e.setState({inmueble:a})},e.guardarInmueble=function(){var t=e.state,a=t.archivos,n=t.inmueble;Object.keys(a).forEach((function(e){var t=Math.floor((new Date).getTime()/1e3),n=a[e].name,r=n.split(".").pop();a[e].alias=(n.split(".")[0]+"_"+t+"."+r).replace(/\s/g,"_").toLocaleLowerCase()}));var r=n.direccion+" "+n.ciudad+" "+n.pais+" "+n.tipoInmueble,i=Se(r);e.props.firebase.guardarFotosInmueble(a).then((function(t){n.fotos=t,n.keywords=i,e.props.firebase.db.collection("Inmuebles").add(n).then((function(t){e.props.history.push("/")})).catch((function(e){le({open:!0,mensaje:e})}))}))},e}return Object(u.a)(a,[{key:"handleChange",value:function(e){this.setState({archivos:e})}},{key:"render",value:function(){return r.a.createElement(ne.a,{style:ke.container},r.a.createElement(ge.a,{style:ke.paper},r.a.createElement(c.a,{container:!0,spacing:3},r.a.createElement(c.a,{item:!0,xs:12,md:8},r.a.createElement(Ee.a,{"aria-label":"breadcrumb"},r.a.createElement(L.a,{color:"inherit",style:ke.link,href:"/"},r.a.createElement(Ce.a,{style:ke.homeIcon}),"Inicio"),r.a.createElement(E.a,{color:"textPrimary"},"Nuevo Cultivo"))),r.a.createElement(c.a,{item:!0,xs:6,md:6},r.a.createElement(re.a,{name:"pais",label:"Estado",fullWidth:!0,onChange:this.entraDatoEnEstado,value:this.state.inmueble.pais})),r.a.createElement(c.a,{item:!0,xs:6,md:6},r.a.createElement(re.a,{name:"ciudad",label:"Regi\xf3n",fullWidth:!0,onChange:this.entraDatoEnEstado,value:this.state.inmueble.ciudad})),r.a.createElement(c.a,{item:!0,xs:12,md:12},r.a.createElement(re.a,{name:"direccion",label:"Direcci\xf3n del cultivo",fullWidth:!0,onChange:this.entraDatoEnEstado,value:this.state.inmueble.direccion})),r.a.createElement(c.a,{item:!0,xs:12,md:12},r.a.createElement(re.a,{name:"tipoInmueble",label:"Tipo de cultivo",fullWidth:!0,multiline:!0,onChange:this.entraDatoEnEstado,value:this.state.inmueble.tipoInmueble})),r.a.createElement(c.a,{item:!0,xs:12,md:12},r.a.createElement(re.a,{name:"descripcionInmueble",label:"Descripci\xf3n de la siembra",fullWidth:!0,multiline:!0,onChange:this.entraDatoEnEstado,value:this.state.inmueble.descripcion}))),r.a.createElement(c.a,{container:!0,fullWidth:!0,style:ke.dropzoneStyle},r.a.createElement(ye.a,{acceptedFiles:["image/*"],dropzoneText:"Selecciona o arrastra las im\xe1genes",filesLimit:6,onChange:this.handleChange.bind(this),showPreviews:!0,showPreviewsInDropzone:!1,showFileNamesInPreview:!1,Icon:je.a})),r.a.createElement(c.a,{container:!0,justify:"center"},r.a.createElement(c.a,{item:!0,xs:12,md:6},r.a.createElement(v.a,{type:"button",fullWidth:!0,variant:"contained",size:"large",color:"primary",style:ke.submit,onClick:this.guardarInmueble},"GUARDAR")))))}}]),a}(n.Component)),Te=a(74),Ae=a(219),Ne=a(220),We=a(221),Re=a(222),Pe=a(223),Ue=a(94),Be=a.n(Ue),Le=a(119),Fe=a.n(Le),ze={cardGrid:{paddingTop:8,paddingBottom:8},paper:{backgroundColor:"#ffffff",padding:"20px",minHeight:550},link:{display:"flex"},gridTextfield:{marginTop:"20px"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}},_e=w(function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={inmuebles:[],textoBusqueda:""},e.cambiarBusquedaTexto=function(t){var a=Object(Te.a)(e);a.setState(Object(p.a)({},t.target.name,t.target.value)),a.state.typingTimeout&&clearTimeout(a.state.typingTimeout),a.setState({name:t.target.value,typing:!1,typingTimeout:setTimeout((function(t){var n=e.props.firebase.db.collection("Inmuebles").orderBy("direccion").where("keywords","array-contains",a.state.textoBusqueda.toLowerCase());""===a.state.textoBusqueda.trim()&&(n=e.props.firebase.db.collection("Inmuebles").orderBy("direccion")),n.get().then((function(t){var a=t.docs.map((function(e){var t=e.data(),a=e.id;return Object(be.a)({id:a},t)}));e.setState({inmuebles:a})}))}),500)})},e.eliminarInmueble=function(t){e.props.firebase.db.collection("Inmuebles").doc(t).delete().then((function(a){e.eliminarInmuebleDeListaEstado(t)}))},e.eliminarInmuebleDeListaEstado=function(t){var a=e.state.inmuebles.filter((function(e){return e.id!==t}));e.setState({inmuebles:a})},e.editarInmueble=function(t){e.props.history.push("auth/id"+t)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(ae.a)(te.a.mark((function e(){var t,a,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.firebase.db.collection("Inmuebles").orderBy("direccion"),e.next=3,t.get();case 3:a=e.sent,n=a.docs.map((function(e){var t=e.data(),a=e.id;return Object(be.a)({id:a},t)})),this.setState({inmuebles:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(ne.a,{style:ze.cardGrid},r.a.createElement(ge.a,{style:ze.paper},r.a.createElement(c.a,{item:!0,xs:12,sm:12},r.a.createElement(Ee.a,{"aria-label":"breadcrumbs"},r.a.createElement(L.a,{color:"inherit",style:ze.link,href:"/"},r.a.createElement(Ce.a,null)," Inicio"),r.a.createElement(E.a,{color:"textPrimary"},"Mis Cultivos"))),r.a.createElement(c.a,{item:!0,xs:12,sm:6,style:ze.gridTextfield},r.a.createElement(re.a,{fullWidth:!0,InputLabelProps:{shrink:!0},name:"textoBusqueda",variant:"outlined",label:"Ingrese el cultivo a buscar",placeholder:"Puedes buscar por estado, direcci\xf3n o cultivo",onChange:this.cambiarBusquedaTexto,value:this.state.textoBusqueda,inputProps:{startAdorment:r.a.createElement(Ae.a,{position:"start"},r.a.createElement(Fe.a,null))}})),r.a.createElement(c.a,{item:!0,xs:12,sm:12,style:ze.gridTextfield},r.a.createElement(c.a,{container:!0,spacing:4},this.state.inmuebles.map((function(t){return r.a.createElement(c.a,{item:!0,key:t.id,xs:12,sm:4},r.a.createElement(Ne.a,{style:ze.card,elevation:3},r.a.createElement(We.a,{style:ze.cardMedia,image:t.fotos&&t.fotos[0]?t.fotos[0]:Be.a,title:"Mi Cultivo"}),r.a.createElement(Re.a,{style:ze.cardContent},r.a.createElement(E.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.ciudad+", "+t.pais)),r.a.createElement(Pe.a,null,r.a.createElement(v.a,{onClick:function(){return e.editarInmueble(t.id)},size:"small",color:"primary"},"Editar"),r.a.createElement(v.a,{size:"small",color:"primary",onClick:function(){return e.eliminarInmueble(t.id)}},"Eliminar"))))}))))))}}]),a}(n.Component)),Me={container:{paddingTop:"8px"},paper:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",backgroundColor:"#ffffff"},link:{padding:"20px",backgroundColor:"#ffffff"},homeIcon:{width:20,height:20,marginRight:"4px"}},Ge=w(function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={inmueble:{pais:"",ciudad:"",direccion:"",tipoInmueble:"",descripcionInmueble:"",fotos:[]}},e.cambiarDato=function(t){var a=Object.assign({},e.state.inmueble);a[t.target.name]=t.target.value,e.setState({inmueble:a})},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(ne.a,{style:Me.container},r.a.createElement(ge.a,{style:Me.paper},r.a.createElement(c.a,{container:!0,spacing:3},r.a.createElement(c.a,{item:!0,xs:12,md:8},r.a.createElement(Ee.a,{"aria-label":"breadcrumb"},r.a.createElement(L.a,{color:"inherit",style:Me.link,href:"/"},r.a.createElement(Ce.a,{style:Me.homeIcon}),"Inicio"),r.a.createElement(E.a,{color:"textPrimary"},"Editar Cultivo"))),r.a.createElement(c.a,{item:!0,xs:6,md:6},r.a.createElement(re.a,{name:"pais",label:"Estado",fullWidth:!0,onChange:this.cambiarDato,value:this.state.inmueble.pais})),r.a.createElement(c.a,{item:!0,xs:6,md:6},r.a.createElement(re.a,{name:"ciudad",label:"Regi\xf3n",fullWidth:!0,onChange:this.cambiarDato,value:this.state.inmueble.ciudad})),r.a.createElement(c.a,{item:!0,xs:12,md:12},r.a.createElement(re.a,{name:"direccion",label:"Direcci\xf3n del cultivo",fullWidth:!0,onChange:this.cambiarDato,value:this.state.inmueble.direccion})),r.a.createElement(c.a,{item:!0,xs:12,md:12},r.a.createElement(re.a,{name:"tipoInmueble",label:"Tipo de cultivo",fullWidth:!0,multiline:!0,onChange:this.cambiarDato,value:this.state.inmueble.tipoInmueble})),r.a.createElement(c.a,{item:!0,xs:12,md:12},r.a.createElement(re.a,{name:"descripcionInmueble",label:"Descripci\xf3n de la siembra",fullWidth:!0,multiline:!0,onChange:this.cambiarDato,value:this.state.inmueble.descripcionInmueble}))),r.a.createElement(c.a,{container:!0,fullWidth:!0,style:Me.dropzoneStyle},r.a.createElement(ye.a,{acceptedFiles:["image/*"],dropzoneText:"Selecciona o arrastra las im\xe1genes",filesLimit:6,showPreviews:!0,showPreviewsInDropzone:!1,showFileNamesInPreview:!1,Icon:je.a})),r.a.createElement(c.a,{container:!0,justify:"center"},r.a.createElement(c.a,{item:!0,xs:12,md:6},r.a.createElement(v.a,{type:"button",fullWidth:!0,variant:"contained",size:"large",color:"primary"},"GUARDAR")))))}}]),a}(n.Component));var qe=function(e){var t=r.a.useContext(I),a=r.a.useState(!1),i=Object(l.a)(a,2),o=i[0],s=i[1],u=N(),m=Object(l.a)(u,2),d=m[0].openSnackbar,p=m[1];return Object(n.useEffect)((function(){t.estaIniciado().then((function(e){s(e)}))})),!1!==o?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!d&&d.open,autoHideDuration:3e3,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},d?d.mensaje:""),onClose:function(){return p({type:"OPEN_SNACKBAR",openMensaje:{open:!1,mensaje:""}})}}),r.a.createElement(_.a,null,r.a.createElement(X.a,{theme:Q},r.a.createElement(Z,null),r.a.createElement(c.a,{container:!0},r.a.createElement(M.d,null,r.a.createElement(he,{exact:!0,path:"/",autenticadoFirebase:t.auth.currentUser,component:_e}),r.a.createElement(he,{exact:!0,path:"/auth/uprofile",autenticadoFirebase:t.auth.currentUser,component:we}),r.a.createElement(he,{exact:!0,path:"/auth/nuevoinmueble",autenticadoFirebase:t.auth.currentUser,component:De}),r.a.createElement(he,{exact:!0,path:"/auth/:id",autenticadoFirebase:t.auth.currentUser,component:Ge}),r.a.createElement(M.b,{path:"/auth/registrarUsuario",exact:!0,component:ue}),r.a.createElement(M.b,{path:"/auth/login",exact:!0,component:pe})))))):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ke={usuario:{nombre:"",apellido:"",email:"",telefono:"",id:"",foto:""},autenticado:!1},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INICIAR_SESION":return Object(be.a)(Object(be.a)({},e),{},{usuario:t.sesion,autenticado:t.autenticado});case"CAMBIAR_SESION":case"SALIR_SESION":return Object(be.a)(Object(be.a)({},e),{},{usuario:t.nuevoUsuario,autenticado:t.autenticado});default:return e}},Je={open:!1,mensaje:""},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_SNACKBAR":return Object(be.a)(Object(be.a)({},e),{},{open:t.openMensaje.open,mensaje:t.openMensaje.mensaje});default:return e}};o.a.render(r.a.createElement(I.Provider,{value:new k},r.a.createElement(A,{initialState:{},reducer:function(e,t){var a=e.sesion,n=e.openSnackbar;return{sesion:He(a,t),openSnackbar:Ye(n,t)}}},r.a.createElement(qe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},94:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"}},[[132,1,2]]]);
//# sourceMappingURL=main.1454d497.chunk.js.map